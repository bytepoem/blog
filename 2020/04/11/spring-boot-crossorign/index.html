<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>在 Spring Boot 中使用 @Crossorign 注解解决跨域问题 - Byte Poem</title><meta description="最近在 Spring Boot 中写 REST API 时发现前端 Ajax 调用的时候会产生跨域问题。于是乎想到用 jsonp 的方式进行解决，但是发现 AbstractJsonpResponseBodyAdvice 这个类在 Spring Boot 2.0 已经被废弃了，上官网发现有新姿势——《Enabling Cross Origin Requests for a RESTful Web S"><meta property="og:type" content="blog"><meta property="og:title" content="在 Spring Boot 中使用 @Crossorign 注解解决跨域问题"><meta property="og:url" content="https://www.bytepoem.com/2020/04/11/spring-boot-crossorign/"><meta property="og:site_name" content="Byte Poem"><meta property="og:description" content="最近在 Spring Boot 中写 REST API 时发现前端 Ajax 调用的时候会产生跨域问题。于是乎想到用 jsonp 的方式进行解决，但是发现 AbstractJsonpResponseBodyAdvice 这个类在 Spring Boot 2.0 已经被废弃了，上官网发现有新姿势——《Enabling Cross Origin Requests for a RESTful Web S"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.bytepoem.com/img/og_image.png"><meta property="article:published_time" content="2020-04-11T11:52:46.000Z"><meta property="article:modified_time" content="2020-04-20T15:37:09.782Z"><meta property="article:author" content="才子"><meta property="article:tag" content="spring boot"><meta property="article:tag" content="java"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.bytepoem.com/2020/04/11/spring-boot-crossorign/"},"headline":"Byte Poem","image":["https://www.bytepoem.com/img/og_image.png"],"datePublished":"2020-04-11T11:52:46.000Z","dateModified":"2020-04-20T15:37:09.782Z","author":{"@type":"Person","name":"才子"},"description":"最近在 Spring Boot 中写 REST API 时发现前端 Ajax 调用的时候会产生跨域问题。于是乎想到用 jsonp 的方式进行解决，但是发现 AbstractJsonpResponseBodyAdvice 这个类在 Spring Boot 2.0 已经被废弃了，上官网发现有新姿势——《Enabling Cross Origin Requests for a RESTful Web S"}</script><link rel="canonical" href="https://www.bytepoem.com/2020/04/11/spring-boot-crossorign/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?c6c792be1fee43498fea485728aeb7c2";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer="defer"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-C0JW4PPCKN" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-C0JW4PPCKN")</script><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="alternate" href="/atom.xml" title="Byte Poem" type="application/atom+xml"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Byte Poem" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bytepoem"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" datetime="2020-04-11T11:52:46.000Z" title="2020-04-11T11:52:46.000Z">2020-04-11</time><span class="level-item"><a class="link-muted" href="/categories/spring-boot/">spring boot</a></span><span class="level-item">8 分钟 读完 (大约 1225 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">在 Spring Boot 中使用 @Crossorign 注解解决跨域问题</h1><div class="content"><p>最近在 Spring Boot 中写 REST API 时发现前端 Ajax 调用的时候会产生跨域问题。于是乎想到用 jsonp 的方式进行解决，但是发现 <code>AbstractJsonpResponseBodyAdvice</code> 这个类在 Spring Boot 2.0 已经被废弃了，上官网发现有新姿势——<a href="https://spring.io/guides/gs/rest-service-cors/">《Enabling Cross Origin Requests for a RESTful Web Service》</a>。</p><a id="more"></a><h3 id="1-浏览器的同源政策"><a href="#1-浏览器的同源政策" class="headerlink" title="1. 浏览器的同源政策"></a>1. 浏览器的同源政策</h3><p><strong>同源策略（SOP，Same origin policy）</strong> 是由 Netscape 提出的一个著名的安全策略。所有支持 JavaScript 的浏览器都会使用这个策略。所谓同源是指，<strong>域名，协议，端口相同</strong>。即便两个不同的域名指向同一个 ip 地址，也非同源。</p><p>同源策略限制以下几种行为：</p><ul><li>1、Cookie、LocalStorage 和 IndexDB 无法读取</li><li>2、Dom 和 Js 对象无法获得</li><li>3、Ajax 请求不能发送</li></ul><p>其目的是为了保证用户信息的安全，防止恶意的网站窃取数据。举个例子：</p><ul><li>A 网站是一家银行，用户登录以后再去访问 B 网站。如果 B 网站可以读取 A 网站的 Cookie，那么 B 网站就可以利用这些信息为所欲为！（浏览器提交表单不受同源政策的限制）。</li></ul><h3 id="2-跨域解决方案"><a href="#2-跨域解决方案" class="headerlink" title="2. 跨域解决方案"></a>2. 跨域解决方案</h3><ul><li>1、jsonp（只支持 GET 请求）</li><li>2、document.domain + iframe</li><li>3、location.hash + iframe</li><li>4、window.name + iframe</li><li>5、postMessage</li><li>6、跨域资源共享（CORS）</li><li>7、nginx 代理</li><li>8、nodejs 中间件代理跨域</li><li>9、WebSocket 协议跨域</li></ul><h3 id="3-CORS"><a href="#3-CORS" class="headerlink" title="3. CORS"></a>3. CORS</h3><p>CORS 是一个 <a href="https://baike.baidu.com/item/W3C%E6%A0%87%E5%87%86">W3C 标准</a>，全称是 <strong>“跨域资源共享”（Cross-origin resource sharing）</strong>，是一种允许当前域（domain）的资源（比如 html / js / web service）被其他域（domain）的脚本请求访问的机制（利用 <a href="https://baike.baidu.com/item/XMLHTTPRequest">XMLHttpRequest</a> 请求）。由于同源策略，浏览器通常会禁止这种跨域请求。</p><p>CORS 请求分为两类：<strong>简单请求</strong>和<strong>非简单请求</strong>。</p><p>其中满足以下两大条件，就属于简单请求。</p><ul><li>请求方法是以下三种方法之一：<ul><li>HEAD</li><li>GET</li><li>POST</li></ul></li><li>HTTP 的头信息不超出以下几种字段：<ul><li>AcceptAccept-Language<ul><li>Content-Language</li><li>Last-Event-ID</li><li>Content-Type：只限于以下三个值<ul><li>application/x-www-form-urlencoded</li><li>multipart/form-data</li><li>text/plain</li></ul></li></ul></li></ul></li></ul><p>不满足的为非简单请求。</p><p>浏览器对于两种请求的处理是不一样的：</p><h4 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h4><ul><li>浏览器会在简单请求的请求头中添加 <code>Origin</code> 字段，用来说明本次请求来自哪个源（协议 + 域名 + 端口）。服务器判断这个值决定是否通过这次请求</li><li>不通过时，返回头则没有 <code>Access-Control-Allow-Origin</code> 字段</li><li>通过时，则会多出以下几个字段</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: http://api.baidu.com</span><br><span class="line">Access-Control-Allow-Credentials: true Access-Control-Expose-Headers: FooBar</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure><h4 id="非简单请求"><a href="#非简单请求" class="headerlink" title="非简单请求"></a>非简单请求</h4><ul><li>在正式请求前会发送一个预检请求（OPTIONS）</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /cors HTTP/1.1 Origin: http://api.bob.comAccess-Control-Request-Method:</span><br><span class="line">PUT Access-Control-Request-Headers: X-Custom-Header Host: api.baidu.com</span><br><span class="line">Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0...</span><br></pre></td></tr></table></figure><ul><li>一旦服务器通过了预检请求，以后每次浏览器正常的 CORS 请求，就都跟简单请求一样，返回头会多一个 <code>Origin</code> 字段以及 <code>Access-Control-Allow-Origin</code> 字段。</li></ul><h3 id="4-Crossorigin-注解"><a href="#4-Crossorigin-注解" class="headerlink" title="4.@Crossorigin 注解"></a>4.@Crossorigin 注解</h3><h4 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//设置允许跨域的路径</span></span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                <span class="comment">//设置允许跨域请求的域名</span></span><br><span class="line">                .allowedOrigins(<span class="string">"*"</span>)</span><br><span class="line">                <span class="comment">//是否允许证书 不再默认开启</span></span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>)</span><br><span class="line">                <span class="comment">//设置允许的方法</span></span><br><span class="line">                .allowedMethods(<span class="string">"*"</span>)</span><br><span class="line">                <span class="comment">//跨域允许时间</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="局部配置"><a href="#局部配置" class="headerlink" title="局部配置"></a>局部配置</h4><p>可以注解在整个 Controller 上。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span>(origins=<span class="string">"http://localhost:9000"</span>, maxAge=<span class="number">3600</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestController</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>也可以注解在单个方法上。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span>(origins=<span class="string">"http://localhost:9000"</span>)</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Greeting <span class="title">greeting</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"world"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还可以通过 <code>Filter</code> 的方式指定接口。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">corsFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">    CorsConfiguration config = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">    config.setAllowCredentials(<span class="keyword">true</span>);</span><br><span class="line">    config.addAllowedOrigin(<span class="string">"http://localhost:9000"</span>);</span><br><span class="line">    config.addAllowedOrigin(<span class="string">"null"</span>);</span><br><span class="line">    config.addAllowedHeader(<span class="string">"*"</span>);</span><br><span class="line">    config.addAllowedMethod(<span class="string">"*"</span>);</span><br><span class="line">    source.registerCorsConfiguration(<span class="string">"/**"</span>, config); <span class="comment">// CORS 配置对所有接口都有效</span></span><br><span class="line">    FilterRegistrationBean bean = newFilterRegistrationBean(<span class="keyword">new</span> CorsFilter(source));</span><br><span class="line">    bean.setOrder(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-测试"><a href="#5-测试" class="headerlink" title="5. 测试"></a>5. 测试</h3><p>新建另外一个 web 项目，此项目端口为 9000，即我们前面设置的 <code>origin</code> ，而 api 项目的端口为 8080。</p><p>其中主要代码如下：</p><p><code>public/hello.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    url: <span class="string">"http://localhost:8080/hello"</span>,</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">data, status, jqxhr</span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".greeting-test"</span>).append(data);</span><br><span class="line">    <span class="built_in">console</span>.log(jqxhr);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>public/index.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello CORS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"hello.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"greeting-test"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>请求成功时即可看到返回结果。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello world</span><br></pre></td></tr></table></figure><hr><p>参考链接：</p><ul><li><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html">跨域资源共享 CORS 详解 —— 阮一峰</a></li><li><a href="https://spring.io/guides/gs/rest-service-cors/">《Enabling Cross Origin Requests for a RESTful Web Service》</a></li></ul></div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/spring-boot/">spring boot</a><a class="link-muted mr-2" rel="tag" href="/tags/java/">java</a></div></article></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/04/20/to-many-close-wait/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">记录一次服务器出现大量 CLOSE_WAIT 的原因排查过程以及解决办法</span></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script><script>new Valine({el:"#valine-thread",notify:void 0,verify:void 0,appId:"dlqOtkdfzvUsDNUmUaj3aLt6-9Nh9j0Va",appKey:"oKj3xUBfI4qdTbLrEhRjyCDp",placeholder:"",avatar:"",avatarForce:!1,meta:["nick","mail","link"],pageSize:10,visitor:!1,highlight:!0,recordIP:!1})</script></div></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen order-3"><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/grafana/"><span class="level-start"><span class="level-item">grafana</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/spring-boot/"><span class="level-start"><span class="level-item">spring boot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/grafana/"><span class="tag">grafana</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node-exporter/"><span class="tag">node_exporter</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring-boot/"><span class="tag">spring boot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tcp/"><span class="tag">tcp</span><span class="tag is-grey-lightest">2</span></a></div></div></div></div></div><div class="card widget toc-scroll is-sticky" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-浏览器的同源政策" href="#1-浏览器的同源政策"><span>1. 浏览器的同源政策</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-跨域解决方案" href="#2-跨域解决方案"><span>2. 跨域解决方案</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-CORS" href="#3-CORS"><span>3. CORS</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-简单请求" href="#简单请求"><span>简单请求</span></a></li><li><a class="is-flex toc-item" id="toc-item-非简单请求" href="#非简单请求"><span>非简单请求</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-4-Crossorigin-注解" href="#4-Crossorigin-注解"><span>4.@Crossorigin 注解</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-全局配置" href="#全局配置"><span>全局配置</span></a></li><li><a class="is-flex toc-item" id="toc-item-局部配置" href="#局部配置"><span>局部配置</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-5-测试" href="#5-测试"><span>5. 测试</span></a></li></ul></div><script async src="/js/toc.js" charset="utf-8"></script></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Byte Poem" height="28"></a><p class="size-small"><span>&copy; 2020 才子</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span><a href="http://www.beian.miit.gov.cn/" style="color:#000"> 粤ICP备18038030号-3</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bytepoem"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={site:{url:"https://www.bytepoem.com",external_link:{enable:!0,exclude:[]}},article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer="defer"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer="defer"></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/toc_extension.js" defer="defer"></script><script src="/js/main.js" defer="defer"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})})</script></body></html>